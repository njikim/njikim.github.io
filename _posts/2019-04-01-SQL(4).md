---
layout: post
title: "SQL (4)"
description: "VIEW"
date: 2019-04-01
tags: [SQL, VIEW]
category: SQL
comments: true
share: true
---

## 8. VIEW
- 가상 테이블
- 정의: 실제 테이블을 여러 관점에서 투영한 가상 테이블
- 사용자에게 편리한 접근 제공
- 컬럼 단위의 보완 관리를 위해
- NOTE: DML 작업 (INSERT, UPDATE, DELETE)

<br>

```sql
CREATE VIEW viewname
AS
    SELECT blah blah
```
```sql
CREATE VIEW vw30
AS
    SELECT empno, ename, sal, comm 
    FROM scott_emp
    WHERE deptno=30;

SELECT * FROM vw30;
```
```
+-------+--------+------+------+
| empno | ename  | sal  | comm |
+-------+--------+------+------+
|  7499 | ALLEN  | 1600 |  300 |
|  7521 | WARD   | 1250 |  500 |
|  7654 | MARTIN | 1250 | 1400 |
|  7698 | BLAKE  | 2850 | NULL |
|  7844 | TURNER | 1500 |    0 |
|  7900 | JAMES  |  950 | NULL |
+-------+--------+------+------+
```
```sql
DROP VIEW vw30;
CREATE VIEW vw30
AS
    SELECT ename, sal, job 
    FROM scott_emp
    WHERE deptno=30;

-- empno: Not null. Hence, empno는 항상 추가
INSERT INTO vw30 VALUES('john', 2500, 'developer');
    -> ERROR 1423 (HY000): Field of view 'dbexample.vw30' underlying table does not have a default value

DROP VIEW vw30;
CREATE VIEW vw30
AS
    SELECT empno, ename, sal, job 
    FROM scott_emp
    WHERE deptno=30;

-- deptno 지정을 안해줘서 vw30에 insert 되지 않고 scott_emp table에만 insert 됨
INSERT INTO vw30 VALUES(1, 'john', 2500, 'developer');
```
```
-- scott_emp table
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| EMPNO    | int(11)     | NO   | PRI | NULL    |       |
| ENAME    | varchar(10) | YES  |     | NULL    |       |
| JOB      | varchar(9)  | YES  |     | NULL    |       |
| MGR      | int(11)     | YES  |     | NULL    |       |
| HIREDATE | datetime    | YES  |     | NULL    |       |
| SAL      | double      | YES  |     | NULL    |       |
| COMM     | double      | YES  |     | NULL    |       |
| DEPTNO   | int(11)     | YES  | MUL | NULL    |       |
+----------+-------------+------+-----+---------+-------+
```

## 9. INDEX